<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Hacker, writer, good guy."><link rel=alternate type=application/rss+xml title="Travis Jeffery's Blog Feed" href=https://travisjeffery.com/rss.xml><meta property="og:type" content="article"><meta property="og:title" content="Building regexps in JavaScript"><meta property="og:description" content='If you need to build a JavaScript RegExp from multiple strings or regexps, dynamically, here&rsquo;s how:
var re = new RegExp("some string" + /some.*(re)/.source);
"some string some        re".match(re);
This example shows how to use this technique to parse out information:
var _ = require(&#39;underscore&#39;);

function Table(rows, options){
    if (!(this instanceof Table)){
        return new Table(rows, options);
    }

    var self = this;

    self.rows = rows;
    self.options = options;

    self._id_for_row = function(row){
        var re = new RegExp(self.options.field_name + /_(\d+)/.source);
        return row.match(re)[1];
    }

    self.row_ids = function(){
        return _.map(self.rows, self._id_for_row);
    };
}

var table = new Table(
    ["user_name_field_1", "user_name_field_22", "user_name_field_23"],
    {"field_name":"user_name_field"}
);

###
#
# > console.log(table.row_ids());
# => [ &#39;1&#39;, &#39;22&#39;, &#39;23&#39; ]
'><meta property="article:published_time" content="2012-01-05T00:00:00Z"><meta property="article:modified_time" content="2012-01-05T00:00:00Z"><meta property="og:url" content="https://travisjeffery.com/posts/2012-01-05-building-regexps-in-javascript/"><meta property="og:site_name" content="Travis Jeffery's Blog"><meta property="og:locale" content="en_US"><meta name=twitter:site content="@travisjeffery"><meta name=twitter:text:title content="Building regexps in JavaScript"><meta name=twitter:image content="https://s.gravatar.com/avatar/3ee6c3893e75232ed43ed4e8e9a7cf39"><meta name=twitter:card content="summary"><link href=https://travisjeffery.com/css/style.min.5320ccbdfe5c8b65316b0017a872de5cb86715d4fe7fec778fefa42ea3262c3b.css rel=stylesheet><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js></script><script src=/js/judy.min.js type=text/javascript></script><script src=/js/main.js type=text/javascript></script><link href="https://fonts.googleapis.com/css?family=Fira+Code:400,700|Libre+Caslon+Text:400,400i,700&display=swap" rel=stylesheet><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css type=text/css media=screen><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-8462120-1","travisjeffery.com"),ga("send","pageview")</script><title>Building regexps in JavaScript</title></head><body><div class="container-fluid container"><div class=row><div class="col-xs-12 col-lg-8 col-lg-offset-2"><hgroup id=header class="col-xs-12 no-gutters clearfix"><img class="no-gutters col-xs-3 col-sm-1" src="https://s.gravatar.com/avatar/3ee6c3893e75232ed43ed4e8e9a7cf39?s=80"><h1 class="logo no-gutters col-xs-4 col-sm-6"><a href=/>travis jeffery</a></h1><div class="social no-gutters col-xs-6 col-sm-5 pull-right"><div class="no-gutters col-xs-12"><a href=/subscribe>Subscribe</a></div><div class="no-gutters col-xs-12"><a href=https://github.com/travisjeffery>GitHub</a></div><div class="no-gutters col-xs-12"><a href=https://twitter.com/travisjeffery>Twitter</a></div></div></hgroup><hr class="col-xs-12 no-gutters"><article class="col-xs-12 no-gutters"><header><h1 class=article-title><a href=https://travisjeffery.com/posts/2012-01-05-building-regexps-in-javascript/>Building regexps in JavaScript</a></h1></header><p>If you need to build a JavaScript RegExp from multiple strings or regexps, dynamically, here&rsquo;s how:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#cf222e>var</span> <span style=color:#1f2328>re</span> <span style=color:#0550ae>=</span> <span style=color:#cf222e>new</span> <span style=color:#6639ba>RegExp</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;some string&#34;</span> <span style=color:#0550ae>+</span> <span style=color:#0a3069>/some.*(re)/</span><span style=color:#1f2328>.</span><span style=color:#1f2328>source</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span><span style=color:#0a3069>&#34;some string some        re&#34;</span><span style=color:#1f2328>.</span><span style=color:#1f2328>match</span><span style=color:#1f2328>(</span><span style=color:#1f2328>re</span><span style=color:#1f2328>);</span>
</span></span></code></pre></div><p>This example shows how to use this technique to parse out information:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#cf222e>var</span> <span style=color:#1f2328>_</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>require</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;underscore&#39;</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>function</span> <span style=color:#1f2328>Table</span><span style=color:#1f2328>(</span><span style=color:#1f2328>rows</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>options</span><span style=color:#1f2328>){</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>!</span><span style=color:#1f2328>(</span><span style=color:#cf222e>this</span> <span style=color:#cf222e>instanceof</span> <span style=color:#1f2328>Table</span><span style=color:#1f2328>)){</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>return</span> <span style=color:#cf222e>new</span> <span style=color:#1f2328>Table</span><span style=color:#1f2328>(</span><span style=color:#1f2328>rows</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>options</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>var</span> <span style=color:#1f2328>self</span> <span style=color:#0550ae>=</span> <span style=color:#cf222e>this</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>self</span><span style=color:#1f2328>.</span><span style=color:#1f2328>rows</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>rows</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>self</span><span style=color:#1f2328>.</span><span style=color:#1f2328>options</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>options</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>self</span><span style=color:#1f2328>.</span><span style=color:#1f2328>_id_for_row</span> <span style=color:#0550ae>=</span> <span style=color:#cf222e>function</span><span style=color:#1f2328>(</span><span style=color:#1f2328>row</span><span style=color:#1f2328>){</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>var</span> <span style=color:#1f2328>re</span> <span style=color:#0550ae>=</span> <span style=color:#cf222e>new</span> <span style=color:#6639ba>RegExp</span><span style=color:#1f2328>(</span><span style=color:#1f2328>self</span><span style=color:#1f2328>.</span><span style=color:#1f2328>options</span><span style=color:#1f2328>.</span><span style=color:#1f2328>field_name</span> <span style=color:#0550ae>+</span> <span style=color:#0a3069>/_(\d+)/</span><span style=color:#1f2328>.</span><span style=color:#1f2328>source</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>return</span> <span style=color:#1f2328>row</span><span style=color:#1f2328>.</span><span style=color:#1f2328>match</span><span style=color:#1f2328>(</span><span style=color:#1f2328>re</span><span style=color:#1f2328>)[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>self</span><span style=color:#1f2328>.</span><span style=color:#1f2328>row_ids</span> <span style=color:#0550ae>=</span> <span style=color:#cf222e>function</span><span style=color:#1f2328>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>return</span> <span style=color:#1f2328>_</span><span style=color:#1f2328>.</span><span style=color:#1f2328>map</span><span style=color:#1f2328>(</span><span style=color:#1f2328>self</span><span style=color:#1f2328>.</span><span style=color:#1f2328>rows</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>self</span><span style=color:#1f2328>.</span><span style=color:#1f2328>_id_for_row</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>var</span> <span style=color:#1f2328>table</span> <span style=color:#0550ae>=</span> <span style=color:#cf222e>new</span> <span style=color:#1f2328>Table</span><span style=color:#1f2328>(</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>[</span><span style=color:#0a3069>&#34;user_name_field_1&#34;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;user_name_field_22&#34;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;user_name_field_23&#34;</span><span style=color:#1f2328>],</span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>{</span><span style=color:#0a3069>&#34;field_name&#34;</span><span style=color:#0550ae>:</span><span style=color:#0a3069>&#34;user_name_field&#34;</span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>###</span>
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>#</span>
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>#</span> <span style=color:#0550ae>&gt;</span> <span style=color:#1f2328>console</span><span style=color:#1f2328>.</span><span style=color:#1f2328>log</span><span style=color:#1f2328>(</span><span style=color:#1f2328>table</span><span style=color:#1f2328>.</span><span style=color:#1f2328>row_ids</span><span style=color:#1f2328>());</span>
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>#</span> <span style=color:#1f2328>=&gt;</span> <span style=color:#1f2328>[</span> <span style=color:#0a3069>&#39;1&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;22&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;23&#39;</span> <span style=color:#1f2328>]</span>
</span></span></code></pre></div></article><hr class="col-xs-12 no-gutters"><footer id=post-footer class="col-xs-12 no-gutters"><p><span class=post-footer-item>Share <a href=https://twitter.com/share class=twitter-share-button data-via=travisjeffery data-size=large>Tweet about this article</a>
<script>!function(e,t,n){var s,o=e.getElementsByTagName(t)[0],i=/^http:/.test(e.location)?"http":"https";e.getElementById(n)||(s=e.createElement(t),s.id=n,s.src=i+"://platform.twitter.com/widgets.js",o.parentNode.insertBefore(s,o))}(document,"script","twitter-wjs")</script></span><span class=post-footer-item>Written Jan 5, 2012</span>
<span class=post-footer-item>Tags <a href=/tags/javascript>javascript</a></span>
<span class=post-footer-item><a href=/>Read more posts&#8230;</a></span></p></footer><hr class="col-xs-12 no-gutters"><footer class="footer col-xs-12 no-gutters left"><div class="col-xs-12 col-sm-4 pull-sm-left no-gutters"><a href=https://twitter.com/travisjeffery class=twitter-follow-button data-show-count=false data-size=large>Follow @travisjeffery</a>
<script>!function(e,t,n){var s,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(s=e.createElement(t),s.id=n,s.src="//platform.twitter.com/widgets.js",o.parentNode.insertBefore(s,o))}(document,"script","twitter-wjs")</script><div class="no-gutters col-xs-12"><a href=https://twitter.com/travisjeffery>Twitter</a></div><div class="no-gutters col-xs-12"><a href=https://github.com/travisjeffery>GitHub</a></div><div class="no-gutters col-xs-12"><a href=mailto:tj@travisjeffery.com>Email</a></div><div class="no-gutters col-xs-12"><a href=https://travisjeffery.com>Homepage</a></div></div><div class="subscribe col-xs-12 col-sm-8 no-gutters pull-sm-right"><p class=zero-margin><strong>Delivered straight to your inbox.</strong> One email per post. No spam.</p><form action="https://travisjeffery.us4.list-manage.com/subscribe/post?u=1e3ff7d7791b26a8f60b9f16c&amp;id=322d3e68e8" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class="validate one-margin" target=_blank novalidate><div id=mc_embed_signup_scroll><div class=mc-field-group><input placeholder="Your email address" type=email name=EMAIL class="required email" id=mce-EMAIL></div><div id=mce-responses class=clear><div class=response id=mce-error-response style=display:none></div><div class=response id=mce-success-response style=display:none></div></div><div style=position:absolute;left:-5e3px aria-hidden=true><input type=text name=b_1e3ff7d7791b26a8f60b9f16c_322d3e68e8 tabindex=-1></div><p class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></p></div><p></form></div></footer></div></div></div></body></html>